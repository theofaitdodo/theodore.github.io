<!doctype html>
<html>
  <head>
    <title>Carte Interactive</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <style>
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
      }
      #chartdiv {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="chartdiv"></div>

    <!-- amCharts 5 -->
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/map.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/geodata/worldLow.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/geodata/canadaLow.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>

    <script>
      am5.ready(function () {
        // Create root element
        var root = am5.Root.new("chartdiv");

        // Set themes
        root.setThemes([
          am5themes_Animated.new(root)
        ]);

        // Create map chart
        var chart = root.container.children.push(
          am5map.MapChart.new(root, {
            panX: "rotateX",
            panY: "rotateY",
            projection: am5map.geoOrthographic(),
          })
        );

        chart.animate({
          key: "rotationX",
          from: 0,
          to: 70,
          duration: 1000,
          easing: am5.ease.inOut(am5.ease.cubic)
        });
        chart.animate({
          key: "rotationY",
          from: 0,
          to: -53,
          duration: 1000,
          easing: am5.ease.inOut(am5.ease.cubic)
        });

        // Create polygon series for the world
        var worldSeries = chart.series.push(
          am5map.MapPolygonSeries.new(root, {
            geoJSON: am5geodata_worldLow,
            exclude: ["AQ", "CA"], // Exclude Antarctica and Canada
            fill: am5.color(0xcccccc), // Grey color for the world
          })
        );

        // Create polygon series for Canada
        var canadaSeries = chart.series.push(
          am5map.MapPolygonSeries.new(root, {
            geoJSON: am5geodata_canadaLow,
            include: ["CA-AB", "CA-BC", "CA-MB", "CA-NB", "CA-NL", "CA-NS", "CA-NT", "CA-NU", "CA-ON", "CA-PE", "CA-SK", "CA-YT"],
            fill: am5.color(0xffcccb),
            stroke: am5.color(0x000000),
          })
        );

        // Create polygon series for Quebec
        var quebecSeries = chart.series.push(
          am5map.MapPolygonSeries.new(root, {
            geoJSON: am5geodata_canadaLow,
            include: ["CA-QC"],
            fill: am5.color(0x003da5),
            stroke: am5.color(0x000000),
          })
        );

        // Create point series for cities
        var pointSeries = chart.series.push(
          am5map.MapPointSeries.new(root, {
            latitudeField: "lat",
            longitudeField: "lon",
          })
        );

        pointSeries.bullets.push(function () {
          let circle = am5.Circle.new(root, {
            radius: 5,
            fill: am5.color(0xa50000),
            stroke: am5.color(0x000000),
            strokeWidth: 1,
            cursorOverStyle: "pointer",
            tooltipHTML: `
              <div style="font-size: 16px; color: #000000; background-color: #f0f0f0; border: 1px solid black; border-radius: 10px; padding: 10px;">
                <b>{title}</b><br>
                <ul>
                  <li><b>Population:</b> {population}</li>
                  <li><b>Fondation:</b> {foundation}</li>
                  <li><b>Économie:</b> {economy}</li>
                </ul>
              </div>
            `
          });

          circle.events.on("click", function(ev) {
            ev.target.get("tooltip").show();
          });

          return am5.Bullet.new(root, {
            sprite: circle
          });
        });

        var cities = [
          {
            title: "Montreal",
            lat: 45.508888,
            lon: -73.561668,
            population: "1,800,055",
            foundation: "1642",
            economy: "Intelligence artificielle, jeux vidéo, aérospatiale et le port de Montréal.",
          },
          {
            title: "Quebec City",
            lat: 46.81389,
            lon: -71.20806,
            population: "566,066",
            foundation: "1608",
            economy: "Administration publique, défense, services, commerce, transport et tourisme.",
          },
          {
            title: "Laval",
            lat: 45.612499,
            lon: -73.707092,
            population: "446,369",
            foundation: "1965",
            economy: "Sciences de la vie, fabrication, <br>technologies de l'information et de la communication.",
          },
          {
            title: "Gatineau",
            lat: 45.4772,
            lon: -75.7016,
            population: "292,281",
            foundation: "2002",
            economy: "Gouvernement fédéral, secteur de la haute technologie.",
          },
          {
            title: "Longueuil",
            lat: 45.536945,
            lon: -73.510712,
            population: "253,629",
            foundation: "1848",
            economy: "Aérospatiale, transport et commerce de détail.",
          },
          {
            title: "Sherbrooke",
            lat: 45.4001,
            lon: -71.8991,
            population: "175,114",
            foundation: "1818",
            economy: "Éducation, santé et fabrication.",
          },
          {
            title: "Lévis",
            lat: 46.75806,
            lon: -71.24028,
            population: "154,091",
            foundation: "1861",
            economy: "Construction navale, services financiers (Groupe Desjardins) et raffinerie de pétrole.",
          },
          {
            title: "Saguenay",
            lat: 48.4167,
            lon: -71.0657,
            population: "147,952",
            foundation: "2002",
            economy: "Industrie de l'aluminium, hydroélectricité et produits du bois.",
          },
          {
            title: "Trois-Rivières",
            lat: 46.35,
            lon: -72.55,
            population: "142,598",
            foundation: "1634",
            economy: "Pâtes et papiers, fabrication et logistique (Port de Trois-Rivières).",
          },
          {
            title: "Terrebonne",
            lat: 45.7,
            lon: -73.633,
            population: "122,098",
            foundation: "1673",
            economy: "Économie diversifiée axée sur la fabrication et les services.",
          },
          {
            title: "Saint-Jean-sur-Richelieu",
            lat: 45.316666,
            lon: -73.26667,
            population: "100,188",
            foundation: "1897",
            economy: "Fabrication (textiles, produits du bois), base militaire et agriculture.",
          },
        ];

        pointSeries.data.setAll(cities);

        // Add zoom control
        chart.set("zoomControl", am5map.ZoomControl.new(root, {}));
      });
    </script>
  </body>
</html>